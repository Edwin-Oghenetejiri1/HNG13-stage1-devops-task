[0;32m--- Starting HNG Stage 1 Automated Deployment Script ---[0m

--- Collecting Deployment Parameters ---
Enter Git Repository URL (e.g., https://github.com/user/repo.git): Enter Git Personal Access Token (PAT): Enter branch name (default: main): Enter Remote SSH Username (e.g., ec2-user): Enter Remote Server IP Address: Enter Path to Private SSH Key (e.g., /c/Users/user/.ssh/key.pem): Enter Internal Container Port (e.g., 80): 
[STATUS] Authenticating and preparing repository...
[GIT] Cloning new repository into hng-stage1-app...
Cloning into 'hng-stage1-app'...
[VERIFY] Checking for deployment files...
[VERIFY] Docker files confirmed. Ready for remote transfer.

--- Establishing SSH Connection to Remote Server (13.58.143.37) ---
[CONNECTIVITY] SSH connection successful on remote host.
[REMOTE] Updating system and installing necessary dependencies...
Amazon Linux 2023 Kernel Livepatch repository   245 kB/s |  26 kB     00:00    
Dependencies resolved.
Nothing to do.
Complete!
Last metadata expiration check: 0:00:02 ago on Tue Oct 21 20:55:34 2025.
Dependencies resolved.
================================================================================
 Package                 Arch    Version                     Repository    Size
================================================================================
Installing:
 docker                  x86_64  25.0.13-1.amzn2023.0.1      amazonlinux   46 M
 nginx                   x86_64  1:1.28.0-1.amzn2023.0.2     amazonlinux   33 k
Installing dependencies:
 container-selinux       noarch  4:2.242.0-1.amzn2023        amazonlinux   58 k
 containerd              x86_64  2.1.4-1.amzn2023.0.1        amazonlinux   23 M
 generic-logos-httpd     noarch  18.0.0-12.amzn2023.0.3      amazonlinux   19 k
 gperftools-libs         x86_64  2.9.1-1.amzn2023.0.3        amazonlinux  308 k
 iptables-libs           x86_64  1.8.8-3.amzn2023.0.2        amazonlinux  401 k
 iptables-nft            x86_64  1.8.8-3.amzn2023.0.2        amazonlinux  183 k
 libcgroup               x86_64  3.0-1.amzn2023.0.1          amazonlinux   75 k
 libnetfilter_conntrack  x86_64  1.0.8-2.amzn2023.0.2        amazonlinux   58 k
 libnfnetlink            x86_64  1.0.1-19.amzn2023.0.2       amazonlinux   30 k
 libnftnl                x86_64  1.2.2-2.amzn2023.0.2        amazonlinux   84 k
 libunwind               x86_64  1.4.0-5.amzn2023.0.3        amazonlinux   66 k
 nginx-core              x86_64  1:1.28.0-1.amzn2023.0.2     amazonlinux  686 k
 nginx-filesystem        noarch  1:1.28.0-1.amzn2023.0.2     amazonlinux  9.6 k
 nginx-mimetypes         noarch  2.1.49-3.amzn2023.0.3       amazonlinux   21 k
 pigz                    x86_64  2.5-1.amzn2023.0.3          amazonlinux   83 k
 runc                    x86_64  1.3.1-1.amzn2023.0.1        amazonlinux  3.8 M

Transaction Summary
================================================================================
Install  18 Packages

Total download size: 75 M
Installed size: 284 M
Downloading Packages:
(1/18): container-selinux-2.242.0-1.amzn2023.no 1.4 MB/s |  58 kB     00:00    
(2/18): generic-logos-httpd-18.0.0-12.amzn2023. 744 kB/s |  19 kB     00:00    
(3/18): gperftools-libs-2.9.1-1.amzn2023.0.3.x8  11 MB/s | 308 kB     00:00    
(4/18): iptables-libs-1.8.8-3.amzn2023.0.2.x86_ 9.7 MB/s | 401 kB     00:00    
(5/18): iptables-nft-1.8.8-3.amzn2023.0.2.x86_6 6.1 MB/s | 183 kB     00:00    
(6/18): libcgroup-3.0-1.amzn2023.0.1.x86_64.rpm 2.0 MB/s |  75 kB     00:00    
(7/18): libnetfilter_conntrack-1.0.8-2.amzn2023 2.2 MB/s |  58 kB     00:00    
(8/18): libnfnetlink-1.0.1-19.amzn2023.0.2.x86_ 1.1 MB/s |  30 kB     00:00    
(9/18): libnftnl-1.2.2-2.amzn2023.0.2.x86_64.rp 1.8 MB/s |  84 kB     00:00    
(10/18): libunwind-1.4.0-5.amzn2023.0.3.x86_64. 3.2 MB/s |  66 kB     00:00    
(11/18): containerd-2.1.4-1.amzn2023.0.1.x86_64  51 MB/s |  23 MB     00:00    
(12/18): nginx-1.28.0-1.amzn2023.0.2.x86_64.rpm 253 kB/s |  33 kB     00:00    
(13/18): nginx-filesystem-1.28.0-1.amzn2023.0.2 443 kB/s | 9.6 kB     00:00    
(14/18): nginx-core-1.28.0-1.amzn2023.0.2.x86_6  18 MB/s | 686 kB     00:00    
(15/18): nginx-mimetypes-2.1.49-3.amzn2023.0.3. 887 kB/s |  21 kB     00:00    
(16/18): pigz-2.5-1.amzn2023.0.3.x86_64.rpm     3.0 MB/s |  83 kB     00:00    
(17/18): runc-1.3.1-1.amzn2023.0.1.x86_64.rpm    43 MB/s | 3.8 MB     00:00    
(18/18): docker-25.0.13-1.amzn2023.0.1.x86_64.r  50 MB/s |  46 MB     00:00    
--------------------------------------------------------------------------------
Total                                            79 MB/s |  75 MB     00:00     
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                        1/1 
  Running scriptlet: nginx-filesystem-1:1.28.0-1.amzn2023.0.2.noarch       1/18 
  Installing       : nginx-filesystem-1:1.28.0-1.amzn2023.0.2.noarch       1/18 
  Installing       : runc-1.3.1-1.amzn2023.0.1.x86_64                      2/18 
  Installing       : containerd-2.1.4-1.amzn2023.0.1.x86_64                3/18 
  Running scriptlet: containerd-2.1.4-1.amzn2023.0.1.x86_64                3/18 
  Installing       : nginx-mimetypes-2.1.49-3.amzn2023.0.3.noarch          4/18 
  Installing       : pigz-2.5-1.amzn2023.0.3.x86_64                        5/18 
  Installing       : libunwind-1.4.0-5.amzn2023.0.3.x86_64                 6/18 
  Installing       : gperftools-libs-2.9.1-1.amzn2023.0.3.x86_64           7/18 
  Installing       : nginx-core-1:1.28.0-1.amzn2023.0.2.x86_64             8/18 
  Installing       : libnftnl-1.2.2-2.amzn2023.0.2.x86_64                  9/18 
  Installing       : libnfnetlink-1.0.1-19.amzn2023.0.2.x86_64            10/18 
  Installing       : libnetfilter_conntrack-1.0.8-2.amzn2023.0.2.x86_64   11/18 
  Installing       : iptables-libs-1.8.8-3.amzn2023.0.2.x86_64            12/18 
  Installing       : iptables-nft-1.8.8-3.amzn2023.0.2.x86_64             13/18 
  Running scriptlet: iptables-nft-1.8.8-3.amzn2023.0.2.x86_64             13/18 
  Installing       : libcgroup-3.0-1.amzn2023.0.1.x86_64                  14/18 
  Installing       : generic-logos-httpd-18.0.0-12.amzn2023.0.3.noarch    15/18 
  Running scriptlet: container-selinux-4:2.242.0-1.amzn2023.noarch        16/18 
  Installing       : container-selinux-4:2.242.0-1.amzn2023.noarch        16/18 
  Running scriptlet: container-selinux-4:2.242.0-1.amzn2023.noarch        16/18 
  Running scriptlet: docker-25.0.13-1.amzn2023.0.1.x86_64                 17/18 
  Installing       : docker-25.0.13-1.amzn2023.0.1.x86_64                 17/18 
  Running scriptlet: docker-25.0.13-1.amzn2023.0.1.x86_64                 17/18 
Created symlink /etc/systemd/system/sockets.target.wants/docker.socket â†’ /usr/lib/systemd/system/docker.socket.

  Installing       : nginx-1:1.28.0-1.amzn2023.0.2.x86_64                 18/18 
  Running scriptlet: nginx-1:1.28.0-1.amzn2023.0.2.x86_64                 18/18 
  Running scriptlet: container-selinux-4:2.242.0-1.amzn2023.noarch        18/18 
  Running scriptlet: nginx-1:1.28.0-1.amzn2023.0.2.x86_64                 18/18 
  Verifying        : container-selinux-4:2.242.0-1.amzn2023.noarch         1/18 
  Verifying        : containerd-2.1.4-1.amzn2023.0.1.x86_64                2/18 
  Verifying        : docker-25.0.13-1.amzn2023.0.1.x86_64                  3/18 
  Verifying        : generic-logos-httpd-18.0.0-12.amzn2023.0.3.noarch     4/18 
  Verifying        : gperftools-libs-2.9.1-1.amzn2023.0.3.x86_64           5/18 
  Verifying        : iptables-libs-1.8.8-3.amzn2023.0.2.x86_64             6/18 
  Verifying        : iptables-nft-1.8.8-3.amzn2023.0.2.x86_64              7/18 
  Verifying        : libcgroup-3.0-1.amzn2023.0.1.x86_64                   8/18 
  Verifying        : libnetfilter_conntrack-1.0.8-2.amzn2023.0.2.x86_64    9/18 
  Verifying        : libnfnetlink-1.0.1-19.amzn2023.0.2.x86_64            10/18 
  Verifying        : libnftnl-1.2.2-2.amzn2023.0.2.x86_64                 11/18 
  Verifying        : libunwind-1.4.0-5.amzn2023.0.3.x86_64                12/18 
  Verifying        : nginx-1:1.28.0-1.amzn2023.0.2.x86_64                 13/18 
  Verifying        : nginx-core-1:1.28.0-1.amzn2023.0.2.x86_64            14/18 
  Verifying        : nginx-filesystem-1:1.28.0-1.amzn2023.0.2.noarch      15/18 
  Verifying        : nginx-mimetypes-2.1.49-3.amzn2023.0.3.noarch         16/18 
  Verifying        : pigz-2.5-1.amzn2023.0.3.x86_64                       17/18 
  Verifying        : runc-1.3.1-1.amzn2023.0.1.x86_64                     18/18 

Installed:
  container-selinux-4:2.242.0-1.amzn2023.noarch                                 
  containerd-2.1.4-1.amzn2023.0.1.x86_64                                        
  docker-25.0.13-1.amzn2023.0.1.x86_64                                          
  generic-logos-httpd-18.0.0-12.amzn2023.0.3.noarch                             
  gperftools-libs-2.9.1-1.amzn2023.0.3.x86_64                                   
  iptables-libs-1.8.8-3.amzn2023.0.2.x86_64                                     
  iptables-nft-1.8.8-3.amzn2023.0.2.x86_64                                      
  libcgroup-3.0-1.amzn2023.0.1.x86_64                                           
  libnetfilter_conntrack-1.0.8-2.amzn2023.0.2.x86_64                            
  libnfnetlink-1.0.1-19.amzn2023.0.2.x86_64                                     
  libnftnl-1.2.2-2.amzn2023.0.2.x86_64                                          
  libunwind-1.4.0-5.amzn2023.0.3.x86_64                                         
  nginx-1:1.28.0-1.amzn2023.0.2.x86_64                                          
  nginx-core-1:1.28.0-1.amzn2023.0.2.x86_64                                     
  nginx-filesystem-1:1.28.0-1.amzn2023.0.2.noarch                               
  nginx-mimetypes-2.1.49-3.amzn2023.0.3.noarch                                  
  pigz-2.5-1.amzn2023.0.3.x86_64                                                
  runc-1.3.1-1.amzn2023.0.1.x86_64                                              

Complete!
Docker version 25.0.13, build 0bab007
Created symlink /etc/systemd/system/multi-user.target.wants/docker.service â†’ /usr/lib/systemd/system/docker.service.
Created symlink /etc/systemd/system/multi-user.target.wants/nginx.service â†’ /usr/lib/systemd/system/nginx.service.
bash: line 15: docker-compose: command not found
